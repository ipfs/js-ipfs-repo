<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>ipfs-repo - v9.1.5</title>
	<meta name="description" content="Documentation for ipfs-repo - v9.1.5">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
	<script async src="assets/js/search.js" id="search-script"></script>
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.json" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">ipfs-repo - v9.1.5</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<h1>ipfs-repo - v9.1.5</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<a href="#ipfs-repo-javascript-implementation-" id="ipfs-repo-javascript-implementation-" style="color: inherit; text-decoration: none;">
					<h1>IPFS Repo JavaScript Implementation <!-- omit in toc --></h1>
				</a>
				<p><a href="http://ipn.io"><img src="https://img.shields.io/badge/made%20by-Protocol%20Labs-blue.svg?style=flat-square" alt=""></a>
					<a href="http://ipfs.io/"><img src="https://img.shields.io/badge/project-IPFS-blue.svg?style=flat-square" alt=""></a>
					<a href="http://webchat.freenode.net/?channels=%23ipfs"><img src="https://img.shields.io/badge/freenode-%23ipfs-blue.svg?style=flat-square" alt=""></a>
					<a href="https://github.com/RichardLitt/standard-readme"><img src="https://img.shields.io/badge/standard--readme-OK-green.svg?style=flat-square" alt="standard-readme compliant"></a>
					<a href="https://travis-ci.com/ipfs/js-ipfs-repo"><img src="https://flat.badgen.net/travis/ipfs/js-ipfs-repo" alt="Travis CI"></a>
					<a href="https://codecov.io/gh/ipfs/js-ipfs-repo"><img src="https://codecov.io/gh/ipfs/js-ipfs-repo/branch/master/graph/badge.svg" alt="codecov"></a> <a href="https://david-dm.org/ipfs/js-ipfs-repo"><img src="https://david-dm.org/ipfs/js-ipfs-repo.svg?style=flat-square" alt="Dependency Status"></a>
				<a href="https://github.com/feross/standard"><img src="https://img.shields.io/badge/code%20style-standard-brightgreen.svg?style=flat-square" alt="js-standard-style"></a></p>
				<blockquote>
					<p>Implementation of the IPFS repo spec (<a href="https://github.com/ipfs/specs/blob/master/REPO.md">https://github.com/ipfs/specs/blob/master/REPO.md</a>) in JavaScript</p>
				</blockquote>
				<p>This is the implementation of the <a href="https://github.com/ipfs/specs/blob/master/REPO.md">IPFS repo spec</a> in JavaScript.</p>
				<a href="#lead-maintainer-" id="lead-maintainer-" style="color: inherit; text-decoration: none;">
					<h2>Lead Maintainer <!-- omit in toc --></h2>
				</a>
				<p><a href="https://github.com/achingbrain">Alex Potsides</a></p>
				<a href="#table-of-contents-" id="table-of-contents-" style="color: inherit; text-decoration: none;">
					<h2>Table of Contents <!-- omit in toc --></h2>
				</a>
				<ul>
					<li><a href="#background">Background</a></li>
					<li><a href="#install">Install</a><ul>
							<li><a href="#npm">npm</a></li>
							<li><a href="#use-in-nodejs">Use in Node.js</a></li>
							<li><a href="#use-in-a-browser-with-browserify-webpack-or-any-other-bundler">Use in a browser with browserify, webpack or any other bundler</a></li>
							<li><a href="#use-in-a-browser-using-a-script-tag">Use in a browser Using a script tag</a></li>
						</ul>
					</li>
					<li><a href="#usage">Usage</a></li>
					<li><a href="#api">API</a><ul>
							<li><a href="#setup">Setup</a><ul>
									<li><a href="#new-repopath-options"><code>new Repo(path[, options])</code></a></li>
									<li><a href="#promise-repoinit"><code>Promise repo.init()</code></a></li>
									<li><a href="#promise-repoopen"><code>Promise repo.open()</code></a></li>
									<li><a href="#promise-repoclose"><code>Promise repo.close()</code></a></li>
									<li><a href="#promiseboolean-repoexists"><code>Promise&lt;boolean&gt; repo.exists()</code></a></li>
									<li><a href="#promiseboolean-repoisinitialized"><code>Promise&lt;Boolean&gt; repo.isInitialized()</code></a></li>
								</ul>
							</li>
							<li><a href="#repos">Repos</a><ul>
									<li><a href="#promise-repoputkey-valueuint8array"><code>Promise repo.put(key, value:Uint8Array)</code></a></li>
									<li><a href="#promiseuint8array-repogetkey"><code>Promise&lt;Uint8Array&gt; repo.get(key)</code></a></li>
								</ul>
							</li>
							<li><a href="#blocks">Blocks</a><ul>
									<li><a href="#promiseblock-repoblocksputblockblock"><code>Promise&lt;Block&gt; repo.blocks.put(block:Block)</code></a></li>
									<li><a href="#asynciteratorblock-repoblocksputmanysourceasynciterableblock"><code>AsyncIterator&lt;Block&gt; repo.blocks.putMany(source:AsyncIterable&lt;Block&gt;)</code></a></li>
									<li><a href="#promiseblock-repoblocksgetcidcid"><code>Promise&lt;Block&gt; repo.blocks.get(cid:CID)</code></a></li>
									<li><a href="#asynciterableblock-repoblocksgetmanysourceasynciterablecid"><code>AsyncIterable&lt;Block&gt; repo.blocks.getMany(source:AsyncIterable&lt;CID&gt;)</code></a></li>
									<li><a href="#promiseboolean-repoblockshas-cidcid"><code>Promise&lt;boolean&gt; repo.blocks.has (cid:CID)</code></a></li>
									<li><a href="#promiseboolean-repoblocksdelete-cidcid"><code>Promise&lt;boolean&gt; repo.blocks.delete (cid:CID)</code></a></li>
									<li><a href="#asynciteratorblockcid-repoblocksquery-query"><code>AsyncIterator&lt;Block|CID&gt; repo.blocks.query (query)</code></a></li>
									<li><a href="#promisecid-repoblocksdeletecidcid"><code>Promise&lt;CID&gt; repo.blocks.delete(cid:CID)</code></a></li>
									<li><a href="#asynciteratorcid-repoblocksdeletemanysourceasynciterablecid"><code>AsyncIterator&lt;CID&gt; repo.blocks.deleteMany(source:AsyncIterable&lt;CID&gt;)</code></a></li>
								</ul>
							</li>
							<li><a href="#datastore">Datastore</a><ul>
									<li><a href="#repodatastore"><code>repo.datastore</code></a></li>
								</ul>
							</li>
							<li><a href="#config">Config</a><ul>
									<li><a href="#promise-repoconfigsetkeystring-valueobject"><code>Promise repo.config.set(key:String, value:Object)</code></a></li>
									<li><a href="#promise-repoconfigreplacevalueobject"><code>Promise repo.config.replace(value:Object)</code></a></li>
									<li><a href="#promise-repoconfiggetkeystring"><code>Promise&lt;?&gt; repo.config.get(key:String)</code></a></li>
									<li><a href="#promiseobject-repoconfiggetall"><code>Promise&lt;Object&gt; repo.config.getAll()</code></a></li>
									<li><a href="#promiseboolean-repoconfigexists"><code>Promise&lt;boolean&gt; repo.config.exists()</code></a></li>
								</ul>
							</li>
							<li><a href="#version">Version</a><ul>
									<li><a href="#promisenumber-repoversionget"><code>Promise&lt;Number&gt; repo.version.get()</code></a></li>
									<li><a href="#promise-repoversionset-versionnumber"><code>Promise repo.version.set (version:Number)</code></a></li>
								</ul>
							</li>
							<li><a href="#api-addr">API Addr</a><ul>
									<li><a href="#promisestring-repoapiaddrget"><code>Promise&lt;String&gt; repo.apiAddr.get()</code></a></li>
									<li><a href="#promise-repoapiaddrsetvalue"><code>Promise repo.apiAddr.set(value)</code></a></li>
								</ul>
							</li>
							<li><a href="#status">Status</a><ul>
									<li><a href="#promiseobject-repostat"><code>Promise&lt;Object&gt; repo.stat()</code></a></li>
								</ul>
							</li>
							<li><a href="#lock">Lock</a><ul>
									<li><a href="#promise-locklockdir"><code>Promise lock.lock(dir)</code></a></li>
									<li><a href="#promise-closerclose"><code>Promise closer.close()</code></a></li>
									<li><a href="#promiseboolean-locklockeddir"><code>Promise&lt;boolean&gt; lock.locked(dir)</code></a></li>
								</ul>
							</li>
						</ul>
					</li>
					<li><a href="#notes">Notes</a><ul>
							<li><a href="#migrations">Migrations</a></li>
						</ul>
					</li>
					<li><a href="#contribute">Contribute</a></li>
					<li><a href="#license">License</a></li>
				</ul>
				<a href="#background" id="background" style="color: inherit; text-decoration: none;">
					<h2>Background</h2>
				</a>
				<p>Here is the architectural reasoning for this repo:</p>
				<pre><code class="language-bash"><span style="color: #000000">                          ┌────────────────────────────────────────┐</span>
<span style="color: #000000">                          │                IPFSRepo                │</span>
<span style="color: #000000">                          └────────────────────────────────────────┘</span>
<span style="color: #000000">                                      ┌─────────────────┐</span>
<span style="color: #000000">                                      │        /        │</span>
<span style="color: #000000">                                      ├─────────────────┤</span>
<span style="color: #000000">                                      │    Datastore    │</span>
<span style="color: #000000">                                      └─────────────────┘</span>
<span style="color: #000000">                                   ┌───────────┴───────────┐</span>
<span style="color: #000000">                          ┌─────────────────┐     ┌─────────────────┐</span>
<span style="color: #000000">                          │     /blocks     │     │   /datastore    │</span>
<span style="color: #000000">                          ├─────────────────┤     ├─────────────────┤</span>
<span style="color: #000000">                          │    Datastore    │     │ LevelDatastore  │</span>
<span style="color: #000000">                          └─────────────────┘     └─────────────────┘</span>

<span style="color: #000000">┌────────────────────────────────────────┐          ┌────────────────────────────────────────┐</span>
<span style="color: #000000">│       IPFSRepo - Default Node.js       │          │       IPFSRepo - Default Browser       │</span>
<span style="color: #000000">└────────────────────────────────────────┘          └────────────────────────────────────────┘</span>
<span style="color: #000000">            ┌─────────────────┐                                 ┌─────────────────┐</span>
<span style="color: #000000">            │        /        │                                 │        /        │</span>
<span style="color: #000000">            ├─────────────────┤                                 ├─────────────────┤</span>
<span style="color: #000000">            │   FsDatastore   │                                 │  IdbDatastore   │</span>
<span style="color: #000000">            └─────────────────┘                                 └─────────────────┘</span>
<span style="color: #000000">         ┌───────────┴───────────┐                           ┌───────────┴───────────┐</span>
<span style="color: #000000">┌─────────────────┐     ┌─────────────────┐         ┌─────────────────┐     ┌─────────────────┐</span>
<span style="color: #000000">│     /blocks     │     │   /datastore    │         │     /blocks     │     │   /datastore    │</span>
<span style="color: #000000">├─────────────────┤     ├─────────────────┤         ├─────────────────┤     ├─────────────────┤</span>
<span style="color: #000000">│ FlatfsDatastore │     │LevelDBDatastore │         │  IdbDatastore   │     │  IdbDatastore   │</span>
<span style="color: #000000">└─────────────────┘     └─────────────────┘         └─────────────────┘     └─────────────────┘</span>
</code></pre>
				<p>This provides a well defined interface for creating and interacting with an IPFS repo.</p>
				<a href="#install" id="install" style="color: inherit; text-decoration: none;">
					<h2>Install</h2>
				</a>
				<a href="#npm" id="npm" style="color: inherit; text-decoration: none;">
					<h3>npm</h3>
				</a>
				<pre><code class="language-sh"><span style="color: #000000">&gt; npm install ipfs-repo</span>
</code></pre>
				<a href="#use-in-nodejs" id="use-in-nodejs" style="color: inherit; text-decoration: none;">
					<h3>Use in Node.js</h3>
				</a>
				<pre><code class="language-js"><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">IPFSRepo</span><span style="color: #000000"> = </span><span style="color: #795E26">require</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;ipfs-repo&#039;</span><span style="color: #000000">)</span>
</code></pre>
				<a href="#use-in-a-browser-with-browserify-webpack-or-any-other-bundler" id="use-in-a-browser-with-browserify-webpack-or-any-other-bundler" style="color: inherit; text-decoration: none;">
					<h3>Use in a browser with browserify, webpack or any other bundler</h3>
				</a>
				<pre><code class="language-js"><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">IPFSRepo</span><span style="color: #000000"> = </span><span style="color: #795E26">require</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;ipfs-repo&#039;</span><span style="color: #000000">)</span>
</code></pre>
				<a href="#use-in-a-browser-using-a-script-tag" id="use-in-a-browser-using-a-script-tag" style="color: inherit; text-decoration: none;">
					<h3>Use in a browser Using a script tag</h3>
				</a>
				<p>Loading this module through a script tag will make the <code>IpfsRepo</code> obj available in the global namespace.</p>
				<pre><code class="language-html"><span style="color: #800000">&lt;script</span><span style="color: #000000FF"> </span><span style="color: #FF0000">src</span><span style="color: #000000FF">=</span><span style="color: #0000FF">&quot;https://unpkg.com/ipfs-repo/dist/index.min.js&quot;</span><span style="color: #800000">&gt;&lt;/script&gt;</span>
</code></pre>
				<a href="#usage" id="usage" style="color: inherit; text-decoration: none;">
					<h2>Usage</h2>
				</a>
				<p>Example:</p>
				<pre><code class="language-js"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">Repo</span><span style="color: #000000"> = </span><span style="color: #795E26">require</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;ipfs-repo&#039;</span><span style="color: #000000">)</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">repo</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">Repo</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;/tmp/ipfs-repo&#039;</span><span style="color: #000000">)</span>

<span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">repo</span><span style="color: #000000">.</span><span style="color: #795E26">init</span><span style="color: #000000">({ </span><span style="color: #001080">cool:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;config&#039;</span><span style="color: #000000"> })</span>
<span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">repo</span><span style="color: #000000">.</span><span style="color: #795E26">open</span><span style="color: #000000">()</span>
<span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;repo is ready&#039;</span><span style="color: #000000">)</span>
</code></pre>
				<p>This now has created the following structure, either on disk or as an in memory representation:</p>
				<pre><code><span style="color: #000000">├── </span><span style="color: #001080">blocks</span>
<span style="color: #000000">│   ├── </span><span style="color: #0070C1">SHARDING</span>
<span style="color: #000000">│   └── </span><span style="color: #001080">_README</span>
<span style="color: #000000">├── </span><span style="color: #001080">config</span>
<span style="color: #000000">├── </span><span style="color: #001080">datastore</span>
<span style="color: #000000">├── </span><span style="color: #001080">keys</span>
<span style="color: #000000">└── </span><span style="color: #001080">version</span>
</code></pre>
				<a href="#api" id="api" style="color: inherit; text-decoration: none;">
					<h2>API</h2>
				</a>
				<a href="#setup" id="setup" style="color: inherit; text-decoration: none;">
					<h3>Setup</h3>
				</a>
				<a href="#new-repopath-options" id="new-repopath-options" style="color: inherit; text-decoration: none;">
					<h4><code>new Repo(path[, options])</code></h4>
				</a>
				<p>Creates an IPFS Repo.</p>
				<p>Arguments:</p>
				<ul>
					<li><code>path</code> (string, mandatory): the path for this repo</li>
					<li><code>options</code> (object, optional): may contain the following values<ul>
							<li><code>autoMigrate</code> (bool, defaults to <code>true</code>): controls automatic migrations of repository.</li>
							<li><code>onMigrationProgress</code> (function(version, percentComplete, message)): callback function to be notified of migration progress</li>
							<li><code>lock</code> (<a href="#lock">Lock</a> or string <em>Deprecated</em>): what type of lock to use. Lock has to be acquired when opening. string can be <code>&quot;fs&quot;</code> or <code>&quot;memory&quot;</code>.</li>
							<li><code>storageBackends</code> (object, optional): may contain the following values, which should each be a class implementing the <a href="https://github.com/ipfs/interface-datastore#readme">datastore interface</a>:<ul>
									<li><code>root</code> (defaults to <a href="https://github.com/ipfs/js-datastore-fs#readme"><code>datastore-fs</code></a> in Node.js and <a href="https://github.com/ipfs/js-datastore-level#readme"><code>datastore-level</code></a> in the browser). Defines the back-end type used for gets and puts of values at the root (<code>repo.set()</code>, <code>repo.get()</code>)</li>
									<li><code>blocks</code> (defaults to <a href="https://github.com/ipfs/js-datastore-fs#readme"><code>datastore-fs</code></a> in Node.js and <a href="https://github.com/ipfs/js-datastore-level#readme"><code>datastore-level</code></a> in the browser). Defines the back-end type used for gets and puts of values at <code>repo.blocks</code>.</li>
									<li><code>keys</code> (defaults to <a href="https://github.com/ipfs/js-datastore-fs#readme"><code>datastore-fs</code></a> in Node.js and <a href="https://github.com/ipfs/js-datastore-level#readme"><code>datastore-level</code></a> in the browser). Defines the back-end type used for gets and puts of encrypted keys at <code>repo.keys</code></li>
									<li><code>datastore</code> (defaults to <a href="https://github.com/ipfs/js-datastore-level#readme"><code>datastore-level</code></a>). Defines the back-end type used as the key-value store used for gets and puts of values at <code>repo.datastore</code>.</li>
								</ul>
							</li>
						</ul>
					</li>
				</ul>
				<pre><code class="language-js"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">repo</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">Repo</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;path/to/repo&#039;</span><span style="color: #000000">)</span>
</code></pre>
				<a href="#promise-repoinit" id="promise-repoinit" style="color: inherit; text-decoration: none;">
					<h4><code>Promise repo.init()</code></h4>
				</a>
				<p>Creates the necessary folder structure inside the repo</p>
				<a href="#promise-repoopen" id="promise-repoopen" style="color: inherit; text-decoration: none;">
					<h4><code>Promise repo.open()</code></h4>
				</a>
				<p><a href="https://en.wikipedia.org/wiki/Record_locking">Locks</a> the repo to prevent conflicts arising from simultaneous access</p>
				<a href="#promise-repoclose" id="promise-repoclose" style="color: inherit; text-decoration: none;">
					<h4><code>Promise repo.close()</code></h4>
				</a>
				<p>Unlocks the repo.</p>
				<a href="#promiseltbooleangt-repoexists" id="promiseltbooleangt-repoexists" style="color: inherit; text-decoration: none;">
					<h4><code>Promise&lt;boolean&gt; repo.exists()</code></h4>
				</a>
				<p>Tells whether this repo exists or not. Returned promise resolves to a <code>boolean</code></p>
				<a href="#promiseltbooleangt-repoisinitialized" id="promiseltbooleangt-repoisinitialized" style="color: inherit; text-decoration: none;">
					<h4><code>Promise&lt;Boolean&gt; repo.isInitialized()</code></h4>
				</a>
				<p>The returned promise resolves to <code>false</code> if the repo has not been initialized and <code>true</code> if it has</p>
				<a href="#repos" id="repos" style="color: inherit; text-decoration: none;">
					<h3>Repos</h3>
				</a>
				<p>Root repo:</p>
				<a href="#promise-repoputkey-valueuint8array" id="promise-repoputkey-valueuint8array" style="color: inherit; text-decoration: none;">
					<h4><code>Promise repo.put(key, value:Uint8Array)</code></h4>
				</a>
				<p>Put a value at the root of the repo</p>
				<ul>
					<li><code>key</code> can be a Uint8Array, a string or a <a href="https://github.com/ipfs/interface-datastore#keys">Key</a></li>
				</ul>
				<a href="#promiseltuint8arraygt-repogetkey" id="promiseltuint8arraygt-repogetkey" style="color: inherit; text-decoration: none;">
					<h4><code>Promise&lt;Uint8Array&gt; repo.get(key)</code></h4>
				</a>
				<p>Get a value at the root of the repo</p>
				<ul>
					<li><code>key</code> can be a Uint8Array, a string or a <a href="https://github.com/ipfs/interface-datastore#keys">Key</a></li>
				</ul>
				<a href="#blocks" id="blocks" style="color: inherit; text-decoration: none;">
					<h3>Blocks</h3>
				</a>
				<a href="#promiseltblockgt-repoblocksputblockblock" id="promiseltblockgt-repoblocksputblockblock" style="color: inherit; text-decoration: none;">
					<h4><code>Promise&lt;Block&gt; repo.blocks.put(block:Block)</code></h4>
				</a>
				<ul>
					<li><code>block</code> should be of type <a href="https://github.com/ipld/js-ipld-block">Block</a></li>
				</ul>
				<a href="#asynciteratorltblockgt-repoblocksputmanysourceasynciterableltblockgt" id="asynciteratorltblockgt-repoblocksputmanysourceasynciterableltblockgt" style="color: inherit; text-decoration: none;">
					<h4><code>AsyncIterator&lt;Block&gt; repo.blocks.putMany(source:AsyncIterable&lt;Block&gt;)</code></h4>
				</a>
				<p>Put many blocks.</p>
				<ul>
					<li><code>source</code> should be an AsyncIterable that yields entries of type <a href="https://github.com/ipld/js-ipld-block">Block</a></li>
				</ul>
				<a href="#promiseltblockgt-repoblocksgetcidcid" id="promiseltblockgt-repoblocksgetcidcid" style="color: inherit; text-decoration: none;">
					<h4><code>Promise&lt;Block&gt; repo.blocks.get(cid:CID)</code></h4>
				</a>
				<p>Get block.</p>
				<ul>
					<li><code>cid</code> is the content id of type <a href="https://github.com/multiformats/js-cid">CID</a></li>
				</ul>
				<a href="#asynciterableltblockgt-repoblocksgetmanysourceasynciterableltcidgt" id="asynciterableltblockgt-repoblocksgetmanysourceasynciterableltcidgt" style="color: inherit; text-decoration: none;">
					<h4><code>AsyncIterable&lt;Block&gt; repo.blocks.getMany(source:AsyncIterable&lt;CID&gt;)</code></h4>
				</a>
				<p>Get many blocks</p>
				<ul>
					<li><code>source</code> should be an AsyncIterable that yields entries of type <a href="https://github.com/multiformats/js-cid">CID</a></li>
				</ul>
				<a href="#promiseltbooleangt-repoblockshas-cidcid" id="promiseltbooleangt-repoblockshas-cidcid" style="color: inherit; text-decoration: none;">
					<h4><code>Promise&lt;boolean&gt; repo.blocks.has (cid:CID)</code></h4>
				</a>
				<p>Indicate if a block is present for the passed CID</p>
				<ul>
					<li><code>cid</code> should be of the type <a href="https://github.com/multiformats/js-cid">CID</a></li>
				</ul>
				<a href="#promiseltbooleangt-repoblocksdelete-cidcid" id="promiseltbooleangt-repoblocksdelete-cidcid" style="color: inherit; text-decoration: none;">
					<h4><code>Promise&lt;boolean&gt; repo.blocks.delete (cid:CID)</code></h4>
				</a>
				<p>Deletes a block</p>
				<ul>
					<li><code>cid</code> should be of the type <a href="https://github.com/multiformats/js-cid">CID</a></li>
				</ul>
				<a href="#asynciteratorltblockcidgt-repoblocksquery-query" id="asynciteratorltblockcidgt-repoblocksquery-query" style="color: inherit; text-decoration: none;">
					<h4><code>AsyncIterator&lt;Block|CID&gt; repo.blocks.query (query)</code></h4>
				</a>
				<p>Query what blocks are available in blockstore.</p>
				<p>If <code>query.keysOnly</code> is true, the returned iterator will yield <a href="https://github.com/multiformats/js-cid">CID</a>s, otherwise it will yield <a href="https://github.com/ipld/js-ipld-block">Block</a>s</p>
				<ul>
					<li><code>query</code> is a object as specified in <a href="https://github.com/ipfs/interface-datastore#query">interface-datastore</a>.</li>
				</ul>
				<p>Datastore:</p>
				<a href="#promiseltcidgt-repoblocksdeletecidcid" id="promiseltcidgt-repoblocksdeletecidcid" style="color: inherit; text-decoration: none;">
					<h4><code>Promise&lt;CID&gt; repo.blocks.delete(cid:CID)</code></h4>
				</a>
				<ul>
					<li><code>cid</code> should be of the type <a href="https://github.com/multiformats/js-cid">CID</a></li>
				</ul>
				<p>Delete a block</p>
				<a href="#asynciteratorltcidgt-repoblocksdeletemanysourceasynciterableltcidgt" id="asynciteratorltcidgt-repoblocksdeletemanysourceasynciterableltcidgt" style="color: inherit; text-decoration: none;">
					<h4><code>AsyncIterator&lt;CID&gt; repo.blocks.deleteMany(source:AsyncIterable&lt;CID&gt;)</code></h4>
				</a>
				<ul>
					<li><code>source</code> should be an Iterable or AsyncIterable that yields entries of the type <a href="https://github.com/multiformats/js-cid">CID</a></li>
				</ul>
				<p>Delete many blocks</p>
				<a href="#datastore" id="datastore" style="color: inherit; text-decoration: none;">
					<h3>Datastore</h3>
				</a>
				<a href="#repodatastore" id="repodatastore" style="color: inherit; text-decoration: none;">
					<h4><code>repo.datastore</code></h4>
				</a>
				<p>This contains a full implementation of <a href="https://github.com/ipfs/interface-datastore#api">the <code>interface-datastore</code> API</a>.</p>
				<a href="#config" id="config" style="color: inherit; text-decoration: none;">
					<h3>Config</h3>
				</a>
				<p>Instead of using <code>repo.set(&#39;config&#39;)</code> this exposes an API that allows you to set and get a decoded config object, as well as, in a safe manner, change any of the config values individually.</p>
				<a href="#promise-repoconfigsetkeystring-valueobject" id="promise-repoconfigsetkeystring-valueobject" style="color: inherit; text-decoration: none;">
					<h4><code>Promise repo.config.set(key:String, value:Object)</code></h4>
				</a>
				<p>Set a config value. <code>value</code> can be any object that is serializable to JSON.</p>
				<ul>
					<li><code>key</code> is a string specifying the object path. Example:</li>
				</ul>
				<pre><code class="language-js"><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">repo</span><span style="color: #000000">.</span><span style="color: #001080">config</span><span style="color: #000000">.</span><span style="color: #795E26">set</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;a.b.c&#039;</span><span style="color: #000000">, </span><span style="color: #A31515">&#039;c value&#039;</span><span style="color: #000000">)</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">config</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">repo</span><span style="color: #000000">.</span><span style="color: #001080">config</span><span style="color: #000000">.</span><span style="color: #795E26">get</span><span style="color: #000000">()</span>
<span style="color: #001080">assert</span><span style="color: #000000">.</span><span style="color: #795E26">equal</span><span style="color: #000000">(</span><span style="color: #001080">config</span><span style="color: #000000">.</span><span style="color: #001080">a</span><span style="color: #000000">.</span><span style="color: #001080">b</span><span style="color: #000000">.</span><span style="color: #001080">c</span><span style="color: #000000">, </span><span style="color: #A31515">&#039;c value&#039;</span><span style="color: #000000">)</span>
</code></pre>
				<a href="#promise-repoconfigreplacevalueobject" id="promise-repoconfigreplacevalueobject" style="color: inherit; text-decoration: none;">
					<h4><code>Promise repo.config.replace(value:Object)</code></h4>
				</a>
				<p>Set the whole config value. <code>value</code> can be any object that is serializable to JSON.</p>
				<a href="#promiseltgt-repoconfiggetkeystring" id="promiseltgt-repoconfiggetkeystring" style="color: inherit; text-decoration: none;">
					<h4><code>Promise&lt;?&gt; repo.config.get(key:String)</code></h4>
				</a>
				<p>Get a config value. Returned promise resolves to the same type that was set before.</p>
				<ul>
					<li><code>key</code> is a string specifying the object path. Example:</li>
				</ul>
				<pre><code class="language-js"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">value</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">repo</span><span style="color: #000000">.</span><span style="color: #001080">config</span><span style="color: #000000">.</span><span style="color: #795E26">get</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;a.b.c&#039;</span><span style="color: #000000">)</span>
<span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;config.a.b.c = &#039;</span><span style="color: #000000">, </span><span style="color: #001080">value</span><span style="color: #000000">)</span>
</code></pre>
				<a href="#promiseltobjectgt-repoconfiggetall" id="promiseltobjectgt-repoconfiggetall" style="color: inherit; text-decoration: none;">
					<h4><code>Promise&lt;Object&gt; repo.config.getAll()</code></h4>
				</a>
				<p>Get the entire config value.</p>
				<a href="#promiseltbooleangt-repoconfigexists" id="promiseltbooleangt-repoconfigexists" style="color: inherit; text-decoration: none;">
					<h4><code>Promise&lt;boolean&gt; repo.config.exists()</code></h4>
				</a>
				<p>Whether the config sub-repo exists.</p>
				<a href="#version" id="version" style="color: inherit; text-decoration: none;">
					<h3>Version</h3>
				</a>
				<a href="#promiseltnumbergt-repoversionget" id="promiseltnumbergt-repoversionget" style="color: inherit; text-decoration: none;">
					<h4><code>Promise&lt;Number&gt; repo.version.get()</code></h4>
				</a>
				<p>Gets the repo version (an integer).</p>
				<a href="#promise-repoversionset-versionnumber" id="promise-repoversionset-versionnumber" style="color: inherit; text-decoration: none;">
					<h4><code>Promise repo.version.set (version:Number)</code></h4>
				</a>
				<p>Sets the repo version</p>
				<a href="#api-addr" id="api-addr" style="color: inherit; text-decoration: none;">
					<h3>API Addr</h3>
				</a>
				<a href="#promiseltstringgt-repoapiaddrget" id="promiseltstringgt-repoapiaddrget" style="color: inherit; text-decoration: none;">
					<h4><code>Promise&lt;String&gt; repo.apiAddr.get()</code></h4>
				</a>
				<p>Gets the API address.</p>
				<a href="#promise-repoapiaddrsetvalue" id="promise-repoapiaddrsetvalue" style="color: inherit; text-decoration: none;">
					<h4><code>Promise repo.apiAddr.set(value)</code></h4>
				</a>
				<p>Sets the API address.</p>
				<ul>
					<li><code>value</code> should be a <a href="https://github.com/multiformats/js-multiaddr">Multiaddr</a> or a String representing a valid one.</li>
				</ul>
				<a href="#status" id="status" style="color: inherit; text-decoration: none;">
					<h3>Status</h3>
				</a>
				<a href="#promiseltobjectgt-repostat" id="promiseltobjectgt-repostat" style="color: inherit; text-decoration: none;">
					<h4><code>Promise&lt;Object&gt; repo.stat()</code></h4>
				</a>
				<p>Gets the repo status.</p>
				<p>Returned promise resolves to an <code>Object</code> with the following keys:</p>
				<ul>
					<li><code>numObjects</code></li>
					<li><code>repoPath</code></li>
					<li><code>repoSize</code></li>
					<li><code>version</code></li>
					<li><code>storageMax</code></li>
				</ul>
				<a href="#lock" id="lock" style="color: inherit; text-decoration: none;">
					<h3>Lock</h3>
				</a>
				<p>IPFS Repo comes with two built in locks: memory and fs. These can be imported via the following:</p>
				<pre><code class="language-js"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">fsLock</span><span style="color: #000000"> = </span><span style="color: #795E26">require</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;ipfs-repo/src/lock&#039;</span><span style="color: #000000">)  </span><span style="color: #008000">// Default in Node.js</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">memoryLock</span><span style="color: #000000"> = </span><span style="color: #795E26">require</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;ipfs-repo/src/lock-memory&#039;</span><span style="color: #000000">)  </span><span style="color: #008000">// Default in browser</span>
</code></pre>
				<p>You can also provide your own custom Lock. It must be an object with the following interface:</p>
				<a href="#promise-locklockdir" id="promise-locklockdir" style="color: inherit; text-decoration: none;">
					<h4><code>Promise lock.lock(dir)</code></h4>
				</a>
				<p>Sets the lock if one does not already exist. If a lock already exists, should throw an error.</p>
				<p><code>dir</code> is a string to the directory the lock should be created at. The repo typically creates the lock at its root.</p>
				<p>Returns <code>closer</code>, where <code>closer</code> has a <code>close</code> method for removing the lock.</p>
				<a href="#promise-closerclose" id="promise-closerclose" style="color: inherit; text-decoration: none;">
					<h4><code>Promise closer.close()</code></h4>
				</a>
				<p>Closes the lock created by <code>lock.open</code></p>
				<p>If no error was thrown, the lock was successfully removed.</p>
				<a href="#promiseltbooleangt-locklockeddir" id="promiseltbooleangt-locklockeddir" style="color: inherit; text-decoration: none;">
					<h4><code>Promise&lt;boolean&gt; lock.locked(dir)</code></h4>
				</a>
				<p>Checks the existence of the lock.</p>
				<p><code>dir</code> is the path to the directory to check for the lock. The repo typically checks for the lock at its root.</p>
				<p>Returned promise resolves to a <code>boolean</code> indicating the existence of the lock.</p>
				<a href="#notes" id="notes" style="color: inherit; text-decoration: none;">
					<h2>Notes</h2>
				</a>
				<ul>
					<li><a href="https://github.com/ipfs/js-ipfs-repo/pull/111#issuecomment-279948247">Explanation of how repo is structured</a></li>
				</ul>
				<a href="#migrations" id="migrations" style="color: inherit; text-decoration: none;">
					<h3>Migrations</h3>
				</a>
				<p>When there is a new repo migration and the version of the repo is increased, don&#39;t
				forget to propagate the changes into the test repo (<code>test/test-repo</code>).</p>
				<p><strong>For tools that run mainly in the browser environment, be aware that disabling automatic
						migrations leaves the user with no way to run the migrations because there is no CLI in the browser. In such
				a case, you should provide a way to trigger migrations manually.</strong></p>
				<a href="#contribute" id="contribute" style="color: inherit; text-decoration: none;">
					<h2>Contribute</h2>
				</a>
				<p>There are some ways you can make this module better:</p>
				<ul>
					<li>Consult our <a href="https://github.com/ipfs/js-ipfs-repo/issues">open issues</a> and take on one of them</li>
					<li>Help our tests reach 100% coverage!</li>
				</ul>
				<p>This repository falls under the IPFS <a href="https://github.com/ipfs/community/blob/master/code-of-conduct.md">Code of Conduct</a>.</p>
				<p><a href="https://github.com/ipfs/community/blob/master/CONTRIBUTING.md"><img src="https://cdn.rawgit.com/jbenet/contribute-ipfs-gif/master/img/contribute.gif" alt=""></a></p>
				<a href="#license" id="license" style="color: inherit; text-decoration: none;">
					<h2>License</h2>
				</a>
				<p><a href="LICENSE">MIT</a></p>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class=" ">
						<a href="modules.html">Exports</a>
					</li>
					<li class=" tsd-kind-namespace">
						<a href="modules/errors.html">errors</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
					<li class=" tsd-kind-class">
						<a href="classes/ipfsrepo.html" class="tsd-kind-icon">Ipfs<wbr>Repo</a>
					</li>
					<li class=" tsd-kind-type-alias tsd-has-type-parameter">
						<a href="modules.html#block" class="tsd-kind-icon">Block</a>
					</li>
					<li class=" tsd-kind-type-alias tsd-has-type-parameter">
						<a href="modules.html#blockstore" class="tsd-kind-icon">Blockstore</a>
					</li>
					<li class=" tsd-kind-type-alias tsd-has-type-parameter">
						<a href="modules.html#config" class="tsd-kind-icon">Config</a>
					</li>
					<li class=" tsd-kind-type-alias tsd-has-type-parameter">
						<a href="modules.html#datastore" class="tsd-kind-icon">Datastore</a>
					</li>
					<li class=" tsd-kind-type-alias tsd-has-type-parameter">
						<a href="modules.html#lock" class="tsd-kind-icon">Lock</a>
					</li>
					<li class=" tsd-kind-type-alias tsd-has-type-parameter">
						<a href="modules.html#lockcloser" class="tsd-kind-icon">Lock<wbr>Closer</a>
					</li>
					<li class=" tsd-kind-type-alias tsd-has-type-parameter">
						<a href="modules.html#options" class="tsd-kind-icon">Options</a>
					</li>
					<li class=" tsd-kind-type-alias tsd-has-type-parameter">
						<a href="modules.html#stat" class="tsd-kind-icon">Stat</a>
					</li>
					<li class=" tsd-kind-property">
						<a href="modules.html#repoversion" class="tsd-kind-icon">repo<wbr>Version</a>
					</li>
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer>
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static property</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
</body>
</html>